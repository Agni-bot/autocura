<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Central - Sistema de Autocura Cognitiva</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
<<<<<<< HEAD
        body {
            background: #f8f9fa;
        }
        .sidebar {
            min-height: 100vh;
            background: #212529;
            color: #fff;
            padding-top: 30px;
        }
        .sidebar .nav-link {
            color: #adb5bd;
            font-size: 1.1em;
        }
        .sidebar .nav-link.active, .sidebar .nav-link:hover {
            color: #fff;
            background: #0d6efd;
            border-radius: 5px;
        }
        .content {
            padding: 30px 40px;
        }
        .section-title {
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.3em;
        }
        .doc-section {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        .search-bar {
            margin-bottom: 20px;
=======
        :root {
            --primary-color: #0d6efd;
            --secondary-color: #6c757d;
            --success-color: #198754;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #0dcaf0;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }

        body {
            background: var(--light-color);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        /* Sidebar */
        .sidebar {
            min-height: 100vh;
            background: var(--dark-color);
            color: #fff;
            padding-top: 30px;
            position: fixed;
            width: 250px;
            transition: all 0.3s;
        }

        .sidebar .nav-link {
            color: #adb5bd;
            font-size: 1.1em;
            padding: 12px 20px;
            transition: all 0.3s;
            border-radius: 5px;
            margin: 5px 10px;
        }

        .sidebar .nav-link:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar .nav-link.active {
            color: #fff;
            background: var(--primary-color);
        }

        .sidebar .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .content {
            margin-left: 250px;
            padding: 30px 40px;
            transition: all 0.3s;
        }

        /* Cards e Seções */
        .doc-section {
            background: #fff;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }

        .doc-section:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .section-title {
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 1.4em;
            color: var(--dark-color);
            display: flex;
            align-items: center;
        }

        .section-title i {
            margin-right: 10px;
            color: var(--primary-color);
        }

        /* Loading States */
        .loading {
            position: relative;
            min-height: 100px;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            margin: -15px 0 0 -15px;
            border: 3px solid var(--light-color);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tabelas */
        .table {
            margin-bottom: 0;
        }

        .table th {
            background: var(--light-color);
            font-weight: 600;
        }

        .table td, .table th {
            padding: 12px;
            vertical-align: middle;
        }

        /* Botões */
        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .btn i {
            margin-right: 5px;
        }

        /* Formulários */
        .form-control, .form-select {
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            transition: all 0.3s;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.15);
        }

        /* Alertas */
        .alert {
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 20px;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        /* Cards de Métricas */
        .metric-card {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .metric-value {
            font-size: 2em;
            font-weight: 600;
            color: var(--primary-color);
        }

        .metric-label {
            color: var(--secondary-color);
            font-size: 0.9em;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .sidebar {
                width: 0;
                padding: 0;
            }

            .content {
                margin-left: 0;
                padding: 20px;
            }

            .sidebar.active {
                width: 250px;
                padding: 30px 0;
            }

            .content.active {
                margin-left: 250px;
            }
        }

        /* Tema Escuro */
        [data-theme="dark"] {
            --primary-color: #0d6efd;
            --secondary-color: #adb5bd;
            --success-color: #198754;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #0dcaf0;
            --light-color: #212529;
            --dark-color: #f8f9fa;
        }

        [data-theme="dark"] body {
            background: var(--light-color);
            color: var(--dark-color);
        }

        [data-theme="dark"] .doc-section {
            background: #2c3034;
            color: var(--dark-color);
        }

        [data-theme="dark"] .table {
            color: var(--dark-color);
        }

        [data-theme="dark"] .table th {
            background: #343a40;
        }

        /* Animações */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Tooltips */
        [data-tooltip] {
            position: relative;
        }

        [data-tooltip]:before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 5px 10px;
            background: var(--dark-color);
            color: #fff;
            border-radius: 5px;
            font-size: 0.8em;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        [data-tooltip]:hover:before {
            opacity: 1;
            visibility: visible;
>>>>>>> origin/main
        }
    </style>
</head>
<body>
<<<<<<< HEAD
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-2 d-none d-md-block sidebar">
            <div class="position-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link active" href="#visao-geral"><i class="bi bi-house"></i> Visão Geral</a></li>
                    <li class="nav-item"><a class="nav-link" href="#metricas"><i class="bi bi-graph-up"></i> Métricas</a></li>
                    <li class="nav-item"><a class="nav-link" href="#diagnosticos"><i class="bi bi-activity"></i> Diagnósticos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#acoes"><i class="bi bi-tools"></i> Ações</a></li>
                    <li class="nav-item"><a class="nav-link" href="#servicos"><i class="bi bi-hdd-network"></i> Serviços</a></li>
                    <li class="nav-item"><a class="nav-link" href="#logs"><i class="bi bi-journal-text"></i> Logs</a></li>
                    <li class="nav-item"><a class="nav-link" href="#documentacao"><i class="bi bi-book"></i> Documentação</a></li>
                    <li class="nav-item"><a class="nav-link" href="#configuracoes"><i class="bi bi-gear"></i> Configurações</a></li>
                </ul>
            </div>
        </nav>
        <!-- Main Content -->
        <main class="col-md-10 ms-sm-auto content">
            <div class="search-bar">
                <input type="text" class="form-control" id="searchInput" placeholder="Buscar em todo o sistema...">
            </div>
            <div id="visao-geral" class="doc-section">
                <div class="section-title">Visão Geral</div>
                <div id="resumo-sistema">Carregando resumo do sistema...</div>
            </div>
            <div id="metricas" class="doc-section">
                <div class="section-title">Métricas</div>
                <div id="metricas-content">Carregando métricas...</div>
            </div>
            <div id="diagnosticos" class="doc-section">
                <div class="section-title">Diagnósticos</div>
                <div id="diagnosticos-content">Carregando diagnósticos...</div>
            </div>
            <div id="acoes" class="doc-section">
                <div class="section-title">Ações</div>
                <div id="acoes-content">Carregando ações...</div>
            </div>
            <div id="servicos" class="doc-section">
                <div class="section-title">Serviços</div>
                <div id="servicos-content">Carregando status dos serviços...</div>
            </div>
            <div id="logs" class="doc-section">
                <div class="section-title">Logs</div>
                <div id="logs-content">Carregando logs...</div>
            </div>
            <div id="documentacao" class="doc-section">
                <div class="section-title">Documentação / Manual do Usuário</div>
                <div id="documentacao-content">Carregando documentação...</div>
            </div>
            <div id="configuracoes" class="doc-section">
                <div class="section-title">Configurações</div>
                <div id="configuracoes-content">Carregando configurações...</div>
            </div>
        </main>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Scroll suave para seções
const links = document.querySelectorAll('.sidebar .nav-link');
links.forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        links.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
        const target = document.querySelector(this.getAttribute('href'));
        if(target) {
            window.scrollTo({
                top: target.offsetTop - 20,
                behavior: 'smooth'
            });
        }
    });
});

// Integração dinâmica - Visão Geral
async function carregarResumoSistema() {
    try {
        const resp = await fetch('/api/v1/relatorio-completo');
        const data = await resp.json();
        const status = data.status_geral;
        let html = `<ul>
            <li><b>Métricas Ativas:</b> ${status.metricas_ativas}</li>
            <li><b>Diagnósticos Ativos:</b> ${status.diagnosticos_ativos}</li>
            <li><b>Ações Pendentes:</b> ${status.acoes_pendentes}</li>
            <li><b>Status dos Serviços:</b><ul>`;
        for (const [servico, ok] of Object.entries(status.status_servicos)) {
            html += `<li>${servico}: <span style="color:${ok ? '#28a745' : '#dc3545'};font-weight:bold;">${ok ? 'Operacional' : 'Indisponível'}</span></li>`;
        }
        html += '</ul></li></ul>';
        document.getElementById('resumo-sistema').innerHTML = html;
    } catch (e) {
        document.getElementById('resumo-sistema').innerHTML = '<span class="text-danger">Erro ao carregar resumo do sistema.</span>';
    }
}

// Estrutura para próximas integrações
async function carregarMetricas() {
    try {
        const resp = await fetch('/api/v1/metricas');
        const metricas = await resp.json();
        if (!Array.isArray(metricas) || metricas.length === 0) {
            document.getElementById('metricas-content').innerHTML = '<span class="text-muted">Nenhuma métrica disponível no momento.</span>';
            return;
        }
        let html = `<div class='table-responsive'><table class='table table-striped table-bordered'>
            <thead><tr>
                <th>Nome</th><th>Valor</th><th>Dimensão</th><th>Unidade</th><th>Timestamp</th>
            </tr></thead><tbody>`;
        for (const m of metricas) {
            html += `<tr>
                <td>${m.nome}</td>
                <td>${m.valor}</td>
                <td>${m.dimensao}</td>
                <td>${m.unidade}</td>
                <td>${new Date(m.timestamp * 1000).toLocaleString('pt-BR')}</td>
            </tr>`;
        }
        html += '</tbody></table></div>';
        document.getElementById('metricas-content').innerHTML = html;
    } catch (e) {
        document.getElementById('metricas-content').innerHTML = '<span class="text-danger">Erro ao carregar métricas.</span>';
    }
}
async function carregarDiagnosticos() {
    try {
        const resp = await fetch('/api/v1/diagnosticos');
        const diagnosticos = await resp.json();
        if (!Array.isArray(diagnosticos) || diagnosticos.length === 0) {
            document.getElementById('diagnosticos-content').innerHTML = '<span class="text-muted">Nenhum diagnóstico disponível no momento.</span>';
            return;
        }
        let html = `<div class='table-responsive'><table class='table table-striped table-bordered'>
            <thead><tr>
                <th>ID</th><th>Tipo de Anomalia</th><th>Severidade</th><th>Recomendações</th><th>Timestamp</th>
            </tr></thead><tbody>`;
        for (const d of diagnosticos) {
            html += `<tr>
                <td>${d.id || '-'}</td>
                <td>${d.tipo_anomalia || '-'}</td>
                <td>${d.nivel_severidade !== undefined ? d.nivel_severidade : '-'}</td>
                <td>${d.recomendacoes || '-'}</td>
                <td>${d.timestamp ? new Date(d.timestamp * 1000).toLocaleString('pt-BR') : '-'}</td>
            </tr>`;
        }
        html += '</tbody></table></div>';
        document.getElementById('diagnosticos-content').innerHTML = html;
    } catch (e) {
        document.getElementById('diagnosticos-content').innerHTML = '<span class="text-danger">Erro ao carregar diagnósticos.</span>';
    }
}
async function carregarAcoes() {
    // TODO: Integrar com /api/v1/acoes
}
async function carregarServicos() {
    // TODO: Integrar com /api/v1/status
}
async function carregarLogs() {
    // TODO: Integrar com endpoint de logs
}
async function carregarDocumentacao() {
    // TODO: Integrar com documentação/manual do usuário
}
async function carregarConfiguracoes() {
    // TODO: Integrar com endpoint/configurações
}

// Chamada inicial
carregarResumoSistema();
carregarMetricas();
carregarDiagnosticos();
// As próximas funções serão chamadas conforme a integração for implementada
</script>
=======
    <!-- Toggle Sidebar Button (Mobile) -->
    <button class="btn btn-primary d-md-none position-fixed top-0 start-0 m-3" 
            onclick="toggleSidebar()" style="z-index: 1000;">
        <i class="bi bi-list"></i>
    </button>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-2 d-none d-md-block sidebar">
                <div class="position-sticky">
                    <div class="text-center mb-4">
                        <h4>Portal Central</h4>
                        <small class="text-muted">Sistema de Autocura Cognitiva</small>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#visao-geral">
                                <i class="bi bi-house"></i> Visão Geral
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#will">
                                <i class="bi bi-cpu"></i> Will
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#metricas">
                                <i class="bi bi-graph-up"></i> Métricas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#diagnosticos">
                                <i class="bi bi-activity"></i> Diagnósticos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#acoes">
                                <i class="bi bi-tools"></i> Ações
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#servicos">
                                <i class="bi bi-hdd-network"></i> Serviços
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#logs">
                                <i class="bi bi-journal-text"></i> Logs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#documentacao">
                                <i class="bi bi-book"></i> Documentação
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#configuracoes">
                                <i class="bi bi-gear"></i> Configurações
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-10 ms-sm-auto content">
                <!-- Barra Superior -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div class="search-bar flex-grow-1 me-3">
                        <input type="text" class="form-control" id="searchInput" 
                               placeholder="Buscar em todo o sistema...">
                    </div>
                    <div class="d-flex">
                        <button class="btn btn-outline-secondary me-2" onclick="toggleTheme()">
                            <i class="bi bi-moon"></i>
                        </button>
                        <button class="btn btn-outline-primary" onclick="refreshAll()">
                            <i class="bi bi-arrow-clockwise"></i> Atualizar
                        </button>
                    </div>
                </div>

                <!-- Seções do Portal -->
                <div id="visao-geral" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-house"></i> Visão Geral
                    </div>
                    <div id="resumo-sistema" class="loading">Carregando resumo do sistema...</div>
                </div>

                <div id="will" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-cpu"></i> Will
                    </div>
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            Acesso Rápido ao Will
                        </div>
                        <div class="card-body d-flex flex-wrap gap-2">
                            <a href="/api/will/status" class="btn btn-outline-success" target="_blank">
                                <i class="bi bi-check-circle"></i> Status do Will
                            </a>
                            <a href="/api/will/decision" class="btn btn-outline-info" target="_blank">
                                <i class="bi bi-lightning"></i> Nova Decisão
                            </a>
                            <a href="/api/will/news/sentiment/EUR-USD" class="btn btn-outline-warning" target="_blank">
                                <i class="bi bi-graph-up"></i> Sentimento EUR-USD
                            </a>
                            <a href="/api/will/analysis" class="btn btn-outline-secondary" target="_blank">
                                <i class="bi bi-search"></i> Análise Completa
                            </a>
                        </div>
                    </div>
                    <div id="will-content" class="loading">Carregando dados do Will...</div>
                </div>

                <div id="metricas" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-graph-up"></i> Métricas
                    </div>
                    <div id="metricas-content" class="loading">Carregando métricas...</div>
                    <canvas id="grafico-metricas" height="120"></canvas>
                    <div id="visualizacao-metricas" class="mt-3"></div>
                </div>

                <div id="diagnosticos" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-activity"></i> Diagnósticos
                    </div>
                    <div id="diagnosticos-content" class="loading">Carregando diagnósticos...</div>
                </div>

                <div id="acoes" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-tools"></i> Ações
                    </div>
                    <div id="acoes-content" class="loading">Carregando ações...</div>
                </div>

                <div id="servicos" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-hdd-network"></i> Serviços
                    </div>
                    <div id="servicos-content" class="loading">Carregando status dos serviços...</div>
                </div>

                <div id="logs" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-journal-text"></i> Logs
                    </div>
                    <div id="logs-content" class="loading">Carregando logs...</div>
                </div>

                <div id="documentacao" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-book"></i> Documentação
                    </div>
                    <div id="documentacao-content" class="loading">Carregando documentação...</div>
                </div>

                <div id="configuracoes" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-gear"></i> Configurações
                    </div>
                    <div id="configuracoes-content" class="loading">Carregando configurações...</div>
                </div>

                <div id="linha-tempo" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-clock-history"></i> Linha do Tempo
                    </div>
                    <div class="mb-3 row">
                        <div class="col-md-3">
                            <select class="form-select" id="filtroTipoEvento">
                                <option value="">Todos os tipos</option>
                                <option value="anomalia">Anomalia</option>
                                <option value="acao">Ação</option>
                                <option value="alerta">Alerta</option>
                                <option value="diagnostico">Diagnóstico</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="filtroSeveridade">
                                <option value="">Todas as severidades</option>
                                <option value="info">Info</option>
                                <option value="warning">Warning</option>
                                <option value="critical">Critical</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="filtroFonteEvento" placeholder="Filtrar por fonte">
                        </div>
                        <div class="col-md-3 d-flex gap-2">
                            <button class="btn btn-primary flex-fill" onclick="carregarLinhaTempo()">
                                <i class="bi bi-funnel"></i> Aplicar Filtros
                            </button>
                            <button class="btn btn-outline-secondary" onclick="exportarEventos('csv')" data-tooltip="Exportar CSV">
                                <i class="bi bi-download"></i> CSV
                            </button>
                            <button class="btn btn-outline-secondary" onclick="exportarEventos('json')" data-tooltip="Exportar JSON">
                                <i class="bi bi-download"></i> JSON
                            </button>
                        </div>
                    </div>
                    <div class="mb-4">
                        <canvas id="grafico-eventos" height="80"></canvas>
                    </div>
                    <div id="linha-tempo-content" class="loading">Carregando eventos...</div>
                </div>

                <div id="dashboard" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-bar-chart"></i> Dashboard
                    </div>
                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <div class="card p-3">
                                <h6>Evolução Temporal de Eventos</h6>
                                <canvas id="grafico-evolucao-eventos" height="120"></canvas>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card p-3">
                                <h6>Tipos de Eventos</h6>
                                <canvas id="grafico-pizza-tipos" height="120"></canvas>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card p-3">
                                <h6>Taxa de Sucesso de Ações</h6>
                                <canvas id="grafico-taxasucesso" height="120"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="sugestoes-automacao" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-lightbulb"></i> Sugestões de Automação
                    </div>
                    <div id="sugestoes-automacao-content" class="loading">Carregando sugestões...</div>
                </div>

                <div id="orquestracao" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-diagram-3"></i> Orquestração
                    </div>
                    <div class="mb-3 d-flex gap-2">
                        <input type="text" class="form-control" id="acaoOrquestracaoInput" placeholder="Nome da ação a orquestrar">
                        <button class="btn btn-primary" onclick="dispararOrquestracao()">
                            <i class="bi bi-play-circle"></i> Disparar Automação
                        </button>
                    </div>
                    <div id="orquestracao-execucoes-content" class="loading">Carregando execuções...</div>
                </div>

                <div id="notificacoes" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-bell"></i> Notificações
                    </div>
                    <div id="notificacoes-canais-content" class="loading">Carregando canais de notificação...</div>
                </div>

                <div id="regras-customizadas" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-sliders"></i> Regras Customizadas
                    </div>
                    <div class="mb-4">
                        <form id="form-regra" onsubmit="salvarRegra(event)">
                            <div class="row g-2 align-items-end">
                                <div class="col-md-3">
                                    <label class="form-label">Nome</label>
                                    <input type="text" class="form-control" id="regra-nome" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Condição</label>
                                    <input type="text" class="form-control" id="regra-condicao" required placeholder="Ex: anomalia == 'alta latência'">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Ação</label>
                                    <input type="text" class="form-control" id="regra-acao" required placeholder="Ex: reiniciar_servico_x">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label">Ativa</label>
                                    <select class="form-select" id="regra-ativa">
                                        <option value="true">Sim</option>
                                        <option value="false">Não</option>
                                    </select>
                                </div>
                                <div class="col-md-1">
                                    <button type="submit" class="btn btn-primary w-100" id="btn-salvar-regra">
                                        <i class="bi bi-save"></i> Salvar
                                    </button>
                                </div>
                            </div>
                            <input type="hidden" id="regra-id">
                        </form>
                    </div>
                    <div id="regras-lista-content" class="loading">Carregando regras...</div>
                </div>

                <div id="auditoria" class="doc-section fade-in">
                    <div class="section-title">
                        <i class="bi bi-shield-check"></i> Auditoria
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="filtroAuditoriaUsuario" placeholder="Filtrar por usuário">
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="filtroAuditoriaTipo">
                                <option value="">Todos os tipos</option>
                                <option value="execucao_acao">Execução de Ação</option>
                                <option value="aprovacao_acao">Aprovação de Ação</option>
                                <option value="alteracao_config">Alteração de Configuração</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-primary w-100" onclick="carregarAuditoria()">
                                <i class="bi bi-funnel"></i> Aplicar Filtros
                            </button>
                        </div>
                    </div>
                    <div id="auditoria-lista-content" class="loading">Carregando eventos de auditoria...</div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/js/portal.js"></script>
>>>>>>> origin/main
</body>
</html> 